/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

'use strict';var d=require("@lexical/react/LexicalComposerContext"),e=require("@lexical/utils"),g=require("lexical"),h=require("react");
function k(c){var b=c.getNodes();if(0<e.$filter(b,a=>g.$isBlockElementNode(a)&&a.canIndent()?a:null).length)return!0;b=c.anchor;c=c.focus;c=c.isBefore(b)?c:b;b=c.getNode();b=e.$getNearestBlockElementAncestorOrThrow(b);if(b.canIndent()){b=b.getKey();let a=g.$createRangeSelection();a.anchor.set(b,0,"element");a.focus.set(b,0,"element");a=g.$normalizeSelection__EXPERIMENTAL(a);if(a.anchor.is(c))return!0}return!1}
function l(c,b){return e.mergeRegister(c.registerCommand(g.KEY_TAB_COMMAND,a=>{let f=g.$getSelection();if(!g.$isRangeSelection(f))return!1;a.preventDefault();a=k(f)?a.shiftKey?g.OUTDENT_CONTENT_COMMAND:g.INDENT_CONTENT_COMMAND:g.INSERT_TAB_COMMAND;return c.dispatchCommand(a,void 0)},g.COMMAND_PRIORITY_EDITOR),c.registerCommand(g.INDENT_CONTENT_COMMAND,()=>{if(null==b)return!1;var a=g.$getSelection();if(!g.$isRangeSelection(a))return!1;a=a.getNodes().map(f=>e.$getNearestBlockElementAncestorOrThrow(f).getIndent());
return Math.max(...a)+1>=b},g.COMMAND_PRIORITY_CRITICAL))}exports.TabIndentationPlugin=function({maxIndent:c}){let [b]=d.useLexicalComposerContext();h.useEffect(()=>l(b,c),[b,c]);return null};exports.registerTabIndentation=l
