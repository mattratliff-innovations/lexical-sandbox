/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 */

'use strict';var c=require("@lexical/react/LexicalComposerContext"),f=require("@lexical/react/useLexicalNodeSelection"),h=require("@lexical/utils"),k=require("lexical"),m=require("react"),r=require("react/jsx-runtime");let t=k.createCommand("INSERT_HORIZONTAL_RULE_COMMAND");
function u({nodeKey:a}){let [b]=c.useLexicalComposerContext(),[e,n,p]=f.useLexicalNodeSelection(a),l=m.useCallback(d=>{const g=k.$getSelection();e&&k.$isNodeSelection(g)&&(d.preventDefault(),b.update(()=>{g.getNodes().forEach(q=>{v(q)&&q.remove()})}));return!1},[b,e]);m.useEffect(()=>h.mergeRegister(b.registerCommand(k.CLICK_COMMAND,d=>{let g=b.getElementByKey(a);return d.target===g?(d.shiftKey||p(),n(!e),!0):!1},k.COMMAND_PRIORITY_LOW),b.registerCommand(k.KEY_DELETE_COMMAND,l,k.COMMAND_PRIORITY_LOW),
b.registerCommand(k.KEY_BACKSPACE_COMMAND,l,k.COMMAND_PRIORITY_LOW)),[p,b,e,a,l,n]);m.useEffect(()=>{let d=b.getElementByKey(a);null!==d&&(e?h.addClassNamesToElement(d,"selected"):h.removeClassNamesFromElement(d,"selected"))},[b,e,a]);return null}
class w extends k.DecoratorNode{static getType(){return"horizontalrule"}static clone(a){return new w(a.__key)}static importJSON(a){return x().updateFromJSON(a)}static importDOM(){return{hr:()=>({conversion:y,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(a){let b=document.createElement("hr");h.addClassNamesToElement(b,a.theme.hr);return b}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}decorate(){return r.jsx(u,{nodeKey:this.__key})}}
function y(){return{node:x()}}function x(){return k.$applyNodeReplacement(new w)}function v(a){return a instanceof w}exports.$createHorizontalRuleNode=x;exports.$isHorizontalRuleNode=v;exports.HorizontalRuleNode=w;exports.INSERT_HORIZONTAL_RULE_COMMAND=t
